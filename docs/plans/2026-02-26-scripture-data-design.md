# 經藏資料完善 — 設計文件

**日期**：2026-02-26
**狀態**：已批准

---

## 1. 目標

完善經藏（Scripture）模組的種子資料，包含：

1. 補齊現有 4 筆咒語的完整原文與拼音
2. 新增「經典」分類（9 部經典）
3. 新增「偈頌」分類（8 首偈頌）
4. 所有內容皆含完整原文與完整拼音

---

## 2. 方案選擇

**採用方案 A：全部寫在 MantraSeedData.swift**

- 不改動 Mantra Model，沿用現有欄位
- 長篇經典按品/分拆成多筆記錄
- 最簡單直接，現有架構完全支援

---

## 3. 資料結構

沿用現有 `Mantra` Model，欄位對應規則：

| 欄位 | 短篇（咒語/偈頌） | 長篇經典（分品） |
|------|------------------|----------------|
| `name` | `"大悲咒"` | `"地藏菩薩本願經・忉利天宮神通品第一"` |
| `originalText` | 完整全文 | 該品完整全文 |
| `pinyinText` | 完整拼音 | 該品完整拼音 |
| `descriptionText` | 功德說明 | 品名+簡述 |
| `category` | `"咒語"` / `"偈頌"` | `"經典"` |
| `suggestedCount` | 依傳統次數 | `1`（讀誦為主） |
| `sortOrder` | 分類內排序 | 按品序排列 |

---

## 4. 完整內容清單

### 4.1 補齊咒語全文（4 筆修改）

| # | 名稱 | 現狀 | 目標 |
|---|------|------|------|
| 1 | 大悲咒 | 截斷 | 完整 84 句 + 完整拼音 |
| 2 | 往生咒 | 截斷 | 完整全文 + 完整拼音 |
| 3 | 藥師灌頂真言 | 截斷 | 完整全文 + 完整拼音 |
| 4 | 準提神咒 | 截斷 | 完整全文 + 完整拼音 |

### 4.2 新增經典（9 部）

| # | 經典 | 預估筆數 | sortOrder 起始 |
|---|------|---------|---------------|
| 1 | 般若波羅蜜多心經 | 1 筆 | 100 |
| 2 | 佛說阿彌陀經 | 1 筆 | 101 |
| 3 | 觀世音菩薩普門品 | 1 筆 | 102 |
| 4 | 藥師琉璃光如來本願功德經 | 1 筆 | 103 |
| 5 | 大勢至菩薩念佛圓通章 | 1 筆 | 104 |
| 6 | 八大人覺經 | 1 筆 | 105 |
| 7 | 金剛般若波羅蜜經 | 32 分 → 32 筆 | 200-231 |
| 8 | 地藏菩薩本願經 | 13 品 → 13 筆 | 300-312 |
| 9 | 佛說無量壽經 | 分段存儲 | 400+ |

### 4.3 新增偈頌（8 筆）

| # | 偈頌 | suggestedCount | sortOrder |
|---|------|---------------|-----------|
| 1 | 開經偈 | 1 | 500 |
| 2 | 迴向偈 | 1 | 501 |
| 3 | 四弘誓願 | 3 | 502 |
| 4 | 三皈依 | 3 | 503 |
| 5 | 懺悔偈 | 3 | 504 |
| 6 | 普賢菩薩警眾偈 | 1 | 505 |
| 7 | 讚佛偈 | 1 | 506 |
| 8 | 發願文 | 1 | 507 |

---

## 5. 檔案變更範圍

| 檔案 | 變更 |
|------|------|
| `beads/Services/MantraSeedData.swift` | 修改：補齊 4 筆咒語全文 + 新增經典 + 新增偈頌 |
| `beads/Views/Scripture/MantraListView.swift` | 無需變更（已支援 4 個分類） |
| `beads/Views/Scripture/MantraDetailView.swift` | 無需變更 |

---

## 6. 資料遷移策略

現有 seed 邏輯只在 `count == 0` 時植入。需加入版本檢查：

- 新增 `UserDefaults` key：`seedDataVersion`
- 版本 1 = 現有 9 筆資料
- 版本 2 = 完善後的完整資料
- 版本不符時補植新資料，不刪除舊資料

---

## 7. 不在範圍內

- Mantra Model 欄位變更
- UI 改動（章節導航、目錄頁等）
- JSON 資料檔抽離
- 修行教學內容（設計文件中提到但不在本次範圍）
